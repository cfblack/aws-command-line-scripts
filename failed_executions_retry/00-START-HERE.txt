â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘     AWS STEP FUNCTIONS FAILED EXECUTION RETRY SCRIPT - COMPLETE PACKAGE   â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ QUICK START (3 MINUTES)

1. Make scripts executable:
   chmod +x *.sh

2. Run in interactive mode:
   ./retry-step-functions-wrapper.sh

3. Or use command line:
   ./retry-failed-step-functions.sh \
     --date 2025-11-13 \
     --region us-east-1 \
     --account-id 123456789012 \
     --profile default \
     --state-machine MyStateMachine

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ FILES IN THIS PACKAGE

  00-START-HERE.txt                  â† You are here
  INDEX.md                           â† Overview & navigation guide
  QUICKSTART.md                      â† 5-minute setup guide
  README.md                          â† Complete documentation
  EXAMPLES.md                        â† Real-world usage examples
  PERMISSIONS.md                     â† File permission fixes
  
  retry-failed-step-functions.sh     â† Main script (the engine)
  retry-step-functions-wrapper.sh    â† Interactive wrapper (easy mode)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“– READING ORDER

  1ï¸âƒ£  Read this file (you're doing it!)
  2ï¸âƒ£  Open INDEX.md for orientation
  3ï¸âƒ£  Follow QUICKSTART.md to get started
  4ï¸âƒ£  Reference README.md for detailed info
  5ï¸âƒ£  Check EXAMPLES.md for advanced usage

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš¡ WHAT THIS SCRIPT DOES

  âœ“ Finds failed Step Functions executions for a specific date
  âœ“ Filters for only those that failed at "PatchDrupalSection" state
  âœ“ Creates smartly named retry executions (e.g., abc123-r)
  âœ“ Preserves original execution input
  âœ“ Waits 5 seconds between retries (prevents throttling)
  âœ“ Provides detailed logging

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… PREREQUISITES

  Required:
  â€¢ AWS CLI v2 (install from https://aws.amazon.com/cli/)
  â€¢ jq (apt/yum/brew install jq)
  â€¢ AWS credentials configured (aws configure --profile default)

  Optional:
  â€¢ Bash 4+ (usually pre-installed)
  â€¢ Your own AWS account for testing

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ IMMEDIATE SETUP

  1. Make scripts executable:
     chmod +x retry-failed-step-functions.sh retry-step-functions-wrapper.sh

  2. Verify prerequisites:
     aws --version
     jq --version

  3. Configure AWS (if needed):
     aws configure --profile default

  4. Test your setup:
     aws sts get-caller-identity --profile default

  5. Run the script:
     ./retry-step-functions-wrapper.sh

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ COMMON COMMANDS

  # Interactive mode (easiest)
  ./retry-step-functions-wrapper.sh

  # Help
  ./retry-failed-step-functions.sh --help

  # Retry yesterday's failures
  ./retry-failed-step-functions.sh \
    --date $(date -d yesterday +%Y-%m-%d) \
    --region us-east-1 \
    --account-id 123456789012 \
    --profile default \
    --state-machine MyStateMachine

  # Debug with verbose output
  ./retry-failed-step-functions.sh \
    --date 2025-11-13 \
    --region us-east-1 \
    --account-id 123456789012 \
    --profile default \
    --state-machine MyStateMachine \
    --verbose

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ†˜ QUICK TROUBLESHOOTING

  Permission denied?
    chmod +x retry-failed-step-functions.sh

  AWS CLI not found?
    Install from: https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html

  jq not found?
    macOS: brew install jq
    Linux: apt-get install jq or yum install jq

  AWS auth failed?
    aws configure --profile default
    Then: aws sts get-caller-identity --profile default

  Need help?
    Run: ./retry-failed-step-functions.sh --help
    Or: cat README.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š DOCUMENTATION

  START HERE:           INDEX.md
  QUICK SETUP:          QUICKSTART.md
  FULL DOCS:            README.md
  EXAMPLES & ADVANCED:  EXAMPLES.md
  FILE PERMISSIONS:     PERMISSIONS.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ EXECUTION NAME TRANSFORMATION

  Original:  ca9961be-4d81-5245-48af-b0c716acab71_af5c8774-0990-cd4a...
  Retry as:  ca9961be-r

  The script takes the first part (before the underscore) and adds "-r"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â±ï¸  SCRIPT BEHAVIOR

  â€¢ Finds all FAILED executions on the specified date
  â€¢ Checks execution history for failures at "PatchDrupalSection" state
  â€¢ Only retries executions that failed at that specific state
  â€¢ Waits 5 seconds between each retry to prevent API throttling
  â€¢ Displays detailed summary at the end

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ NEXT STEPS

  1. chmod +x *.sh
  2. Open INDEX.md
  3. Follow QUICKSTART.md
  4. Run the script
  5. Check your Step Functions console

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Questions? Check:
  â€¢ INDEX.md for navigation
  â€¢ QUICKSTART.md for 5-minute setup
  â€¢ README.md for complete documentation
  â€¢ EXAMPLES.md for usage examples

Ready? Let's go! ğŸš€

â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
